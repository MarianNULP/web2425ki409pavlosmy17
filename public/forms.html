<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<div class="container py-4" style="max-width: 480px">

  <!-- GET --------------- -->
  <div class="card mb-4">
    <div class="card-header">GET (AJAX)</div>
    <div class="card-body text-center">
      <button id="getBtn" class="btn btn-outline-primary">
        Завантажити час
      </button>
      <p id="getOut" class="mt-3 fw-bold"></p>
    </div>
  </div>

  <!-- POST -------------- -->
  <div class="card">
    <div class="card-header">POST (AJAX)</div>
    <div class="card-body">
      <form id="postForm" class="input-group">
        <input name="msg" class="form-control" placeholder="Напишіть щось…" required>
        <button class="btn btn-success">Надіслати</button>
      </form>
      <pre id="postOut" class="mt-3 bg-light p-2 rounded small"></pre>
    </div>
  </div>

</div>

<script>
/* --- GET --- */
getBtn.onclick = async () => {
  getOut.textContent = 'Завантаження…';
  const r = await fetch('/api/time');
  getOut.textContent = (await r.json()).ts;
};

/* --- POST --- */
postForm.onsubmit = async e => {
  e.preventDefault();
  postOut.textContent = 'Завантаження…';
  const fd = new FormData(postForm);
  const r  = await fetch('/api/echo', {
    method:'POST',
    body : new URLSearchParams(fd)
  });
  postOut.textContent = JSON.stringify(await r.json(), null, 2);
};
</script>
